@(story: Story)

<!-- all the photos we have on this subject from the latest chapter -->

@gallery(g: model.Gallery) = {

        @g.images.zipWithRowInfo.map{ case(image, info) =>
            <div>
                <img src="@image.url" />
                <p class="type-7">
                    @Html(image.caption.getOrElse(""))
                </p>
            </div>
        }
}

@eventList(events: Seq[Event], isPanel: Boolean) = {
    @events.map { event =>
        @if(event.hasContent) {
            <div class="swipe" id="picture-swipe">
                <div class="swipe-wrap">
                    @event.content.map{
                        case g: Gallery => { @gallery(g) }
                        case _ => {}
                    }
                </div>
            </div>
        }
    }
}

@if(story.hasEvents) {

    <style>
        #js-pictures img { width: 100%; }
        .swipe {
          overflow: hidden;
          visibility: hidden;
          position: relative;
        }
        .swipe-wrap {
          overflow: hidden;
          position: relative;
        }
        .swipe-wrap > div {
          float:left;
          width:100%;
          position: relative;
        }
    </style>
    
    <section class="story-pictures" data-link-name="story-pictures">
        <h2 class="story-title story-title--section">
            @story.labels.getOrElse("pictures", "In pictures")
        </h2>
        <div id="js-pictures" class="box-indent" data-link-name="Pictures">
            @eventList(story.events.take(1), false)
        </div>
    </section>
}
