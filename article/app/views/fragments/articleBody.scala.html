@(article: Article, storyPackage: List[Trail])(implicit request: RequestHeader)

<h2 class="article-zone type-1">
    <a class="zone-color" data-link-name="article section" href="/@article.section">@Html(article.sectionName)</a>
</h2>

<article id="article" class="article @if(article.isLive){is-live}"
    itemprop="mainContentOfPage" itemscope itemtype="@article.schemaType" role="main">

    <header class="article-head">
        @fragments.dateline(article.webPublicationDate, article.isLive)

        @fragments.headline(article.headline)

        @fragments.standfirst(article)
    </header>

    @fragments.witnessCallToAction(article)

    <div class="after-header"></div>

    <div class="tabs">
        <ol class="tabs__container js-tabs">
            <li class="tabs__tab tabs__tab--selected">
                <a class="tabs__link" href="#tabs-article" data-link-name="Article tab">Article</a>
            </li>
            <li class="tabs__tab">
                <a class="tabs__link js-show-discussion" href="#tabs-discussion" data-link-name="Discussion tab">
                    Discussion <span class="discussion-comment-count"></span>
                </a>
            </li>
        </ol>

        <div class="tabs__content">
             <div class="tabs__pane" id="tabs-article">

                 @if(!article.isLive  && !article.hasVideoAtTop) {
                     @article.mainPicture.map{ mainPicture =>
                         @article.mainPicture(width=220).map{ smallCrop =>
                             @fragments.img(mainPicture, smallCrop)
                         }
                     }
                 }

                 @fragments.byline(article.byline, article)

                 @if(article.isLive) {
                     @fragments.autoUpdate()
                 }

                 <div class="article-body from-content-api @if(article.isLive) {live-blog}"
                 itemprop="@if(article.isReview){reviewBody} else {articleBody}">
                     @* <!-- ordering of cleaners is important --> *
                     @withJsoup(BulletCleaner(article.body))(
                         PictureCleaner(article),
                         InBodyLinkCleaner("in body link"),
                         BlockNumberCleaner,
                         TweetCleaner,
                         WitnessCleaner,
                         VideoPosterCleaner(article.videoAssets)
                     )
                </div>

             </div>
             <div class="tabs__pane js-hidden" id="tabs-discussion">
                <div class="discussion-container"></div>
             </div>
        </div>
    </div>
    
</article>

@fragments.social(article)

@if(storyPackage.nonEmpty) {
    <aside role="complementary">
        @fragments.relatedTrails(storyPackage, heading = "More on this story", visibleTrails = 5)
    </aside>
} else {
    <aside class="js-related" role="complementary"></aside>
}

<div   class="js-popular" role="complementary"></div>
