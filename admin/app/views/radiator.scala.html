@(charts: Seq[tools.Chart], metadata: MetaData, switches: Seq[com.gu.management.Switchable])(implicit request: RequestHeader)

@main(metadata, Switches.all){
} {
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["corechart"]});
        google.setOnLoadCallback(drawCharts);

        function drawCharts() {
            @charts.map{ chart =>
                new google.visualization.LineChart(document.getElementById('@chart.id'))
                    .draw(google.visualization.arrayToDataTable(@Html(chart.asDataset)), {
                    title: '@chart.name',
                    legend: 'none' @chart.yAxis.map{ title =>, vAxis: {title: "@title"} }
                });
            }
        }
    </script>


    @charts.map{ chart => <div id="@chart.id" style="max-width: 1200px"></div> }

    <ul id="pingdom"></ul>

    <style>
        .up { color: green; } 
        .down { color: red; } 
    </style>
    <script type="text/javascript">
        window.addEventListener('load', function() {
            var ads = document.querySelectorAll('.ad-slot')
            for (var i = 0; i < ads.length; i++) {
                ads[i].className = 'h';
            }

            document.querySelector('#footer-nav').className = 'h';

            var pingdom = document.getElementById('pingdom')
            require([
                    'reqwest'
                ]).then(function(r) {
                    r({url:'/radiator/pingdom', type:'json'}, function(status) {
                        JSON.parse(status).checks.filter(function (check) {

                            return /ELB|Host|CDN/.test(check.name);

                            }).forEach(function(check){
                                var li = document.createElement('li');
                                li.className = check.status;
                                li.textContent = check.name;
                                pingdom.appendChild(li);
                            })

                        })
                   })

           });

    </script>
    }
