@(page: MetaData, isFooter: Boolean=false)(implicit request: RequestHeader)

@defining(Site(request)) { site =>
     <nav role="navigation" aria-label="Guardian sections"
        @if(isFooter){ data-link-name="global navigation: footer : sections"}>
        <ul class="nav nav--columns nav--top-border-off @if(isFooter){nav--footer} cf">

            @Navigation(request).map{ section =>
            <li class="nav__item@if(section.newWindow && !isFooter){ mobile-only}">
                <a href="@section.href"
                    data-link-name="@section.linkName"
                    class="nav__link@if("/" + page.id == section.href) { is-active}"
                    @if(section.newWindow){ target="_blank" }>
                        @HtmlFormat.raw(section.title)
                </a>
            </li>
            }
            <li class="nav__item @if(!isFooter){ mobile-only}"><a class="nav__link" data-link-name="all sections" href="/sections">All sections</a></li>
        </ul>
    
        @if(!isFooter){
            <div class="search-box" role="search">
                <gcse:searchbox></gcse:searchbox>
            </div>
            <div class="search-results" data-link-name="search">
                <gcse:searchresults></gcse:searchresults>
            </div>
        }

        <ul class="nav nav--columns nav--section-divider nav--top-border-off @if(isFooter){nav--footer} else {mobile-only} cf">
            @if(site.isUsEdition) {
            <li class="nav__item"><a class="nav__link edition" data-link-name="switch to uk edition" href="http://@site.ukHost/@page.id">UK edition</a></li>
            } else {
            <li class="nav__item"><a class="nav__link edition" data-link-name="switch to us edition" href="http://@site.usHost/@page.id">US edition</a></li>
            }
        </ul>
     </nav>
}
